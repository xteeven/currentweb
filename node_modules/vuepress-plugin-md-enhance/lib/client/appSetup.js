import{defineClientAppSetup as e}from"@vuepress/client";import{watch as t,onMounted as s}from"vue";import{useRoute as n}from"vue-router";import"./styles/code-demo.scss";const o=CODE_DEMO_OPTIONS,a={html:{types:["html","slim","haml","md","markdown","vue"],map:{html:"none",vue:"none",md:"markdown"}},js:{types:["js","javascript","coffee","coffeescript","ts","typescript","ls","livescript"],map:{js:"none",javascript:"none",coffee:"coffeescript",ls:"livescript",ts:"typescript"}},css:{types:["css","less","sass","scss","stylus","styl"],map:{css:"none",styl:"stylus"}}},r=(e,t,s)=>{const n=document.createElement(e);return t&&Object.keys(t).forEach((e=>{if(e.indexOf("data"))n[e]=t[e];else{const s=e.replace("data","");n.dataset[s]=t[e]}})),s&&s.forEach((e=>{n.appendChild(e)})),n},c=e=>({...o,...e,jsLib:Array.from(new Set([...o.jsLib||[],...e.jsLib||[]])),cssLib:Array.from(new Set([...o.cssLib||[],...e.cssLib||[]]))}),d=(e,t)=>{if(void 0!==e[t])return e[t];const s=new Promise((e=>{const s=document.createElement("script");s.src=t,document.getElementsByTagName("body")[0].appendChild(s),s.onload=()=>{e()}}));return e[t]=s,s},l=e=>e.replace(/<br \/>/g,"<br>").replace(/<((\S+)[^<]*?)\s+\/>/g,"<$1></$2>"),p=e=>`<div id="app">\n${l(e)}\n</div>`,i=e=>`${e.replace("export default ","const $reactApp = ").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,"")};\nReactDOM.render(React.createElement($reactApp), document.getElementById("app"))`,m=e=>e.replace(/export\s+default\s*\{(\n*[\s\S]*)\n*\}\s*;?$/u,"Vue.createApp({$1}).mount('#app')").replace(/export\s+default\s*define(Async)?Component\s*\(\s*\{(\n*[\s\S]*)\n*\}\s*\)\s*;?$/u,"Vue.createApp({$1}).mount('#app')").trim(),u=e=>`(function(exports){var module={};module.exports=exports;${e};return module.exports.__esModule?module.exports.default:module.exports;})({})`,h=(e,t)=>Array.from(e.querySelectorAll(`.${t}`)),v=(e,t,s,n)=>{const o=e.classList.contains("down");t.style.height=o?`${s.clientHeight+13.8}px`:"0",o?(n.classList.add("show-link"),e.classList.remove("down")):(n.classList.remove("show-link"),e.classList.add("down"))},y=({html:e,js:t,css:s,jsLib:n,jsx:o,cssLib:a,codepenEditors:c,codepenLayout:d},l)=>r("form",{className:"code-demo-codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[r("input",{type:"hidden",name:"data",value:JSON.stringify({html:e,js:t,css:s,js_external:n.join(";"),css_external:a.join(";"),layout:d,html_pre_processor:l?l.html[1]:"none",js_pre_processor:l?l.js[1]:o?"babel":"none",css_pre_processor:l?l.css[1]:"none",editors:c})}),r("button",{type:"submit",innerHTML:'<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><defs><style/></defs><path d="M123.429 668L468 897.714V692.571L277.143 565.143zM88 585.714L198.286 512 88 438.286v147.428zm468 312L900.571 668 746.857 565.143 556 692.57v205.143zM512 616l155.429-104L512 408 356.571 512zM277.143 458.857L468 331.43V126.286L123.429 356zM825.714 512L936 585.714V438.286zm-78.857-53.143L900.571 356 556 126.286v205.143zM1024 356v312q0 23.429-19.429 36.571l-468 312Q524.571 1024 512 1024t-24.571-7.429l-468-312Q0 691.43 0 668V356q0-23.429 19.429-36.571l468-312Q499.429 0 512 0t24.571 7.429l468 312Q1024 332.57 1024 356z"/></svg>',className:"button",datatip:"Codepen"})]),f=({code:e,codeType:t,container:s,innerHTML:n=!1})=>{const{id:o}=s,a=h(s,"demo-wrapper")[0],c=h(s,"code-wrapper")[0],d=h(s,"code")[0],l=h(s,"code-demo-footer")[0],p=decodeURIComponent(s.dataset.title||""),i=a.attachShadow({mode:"open"}),m=document.createElement("div");if(m.classList.add("code-demo-app"),i.appendChild(m),e.isLegal){n&&(m.innerHTML=e.html),((e,t)=>{if(t.css&&Array.from(e.childNodes).every((e=>"STYLE"!==e.nodeName))){const s=r("style",{innerHTML:t.css});e.appendChild(s)}})(i,e),((e,t,s)=>{const n=s.getScript();if(n&&Array.from(t.childNodes).every((e=>"SCRIPT"!==e.nodeName))){const s=document.createElement("script");s.appendChild(document.createTextNode(`{const document=window.document.querySelector('#${e} .demo-wrapper').shadowRoot;\n${n}}`)),t.appendChild(s)}})(o,i,e);const t=r("button",{className:"expand down"});l.appendChild(t),l.appendChild(r("span",{className:"title",innerHTML:p})),t.addEventListener("click",v.bind(null,t,c,d,l)),c.style.height="0",!1!==e.jsfiddle&&l.appendChild((({html:e,js:t,css:s,jsLib:n,cssLib:o})=>r("form",{className:"code-demo-jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[r("input",{type:"hidden",name:"html",value:e}),r("input",{type:"hidden",name:"js",value:t}),r("input",{type:"hidden",name:"css",value:s}),r("input",{type:"hidden",name:"wrap",value:"1"}),r("input",{type:"hidden",name:"panel_js",value:"3"}),r("input",{type:"hidden",name:"resources",value:[...o,...n].join(",")}),r("button",{type:"submit",className:"button",innerHTML:'<svg class="icon" viewBox="0 0 1170 1024" xmlns="http://www.w3.org/2000/svg" width="228.516" height="200"><defs><style/></defs><path d="M1028.571 441.143q63.429 26.286 102.572 83.143t39.143 126.571q0 93.714-67.429 160.286T940 877.714q-2.286 0-6.571-.285t-6-.286H232q-97.143-5.714-164.571-71.714T0 645.143q0-62.857 31.429-116t84-84q-6.858-22.286-6.858-46.857 0-65.715 46.858-112T269.143 240q54.286 0 98.286 33.143 42.857-88 127.142-141.714t186.572-53.715q94.857 0 174.857 46t126.571 124.857 46.572 172q0 3.429-.286 10.286t-.286 10.286zm-761.142 152q0 69.714 48 110.286T434.286 744q78.285 0 137.143-56.571-9.143-11.429-27.143-32.286t-24.857-28.857q-38.286 37.143-82.286 37.143-31.429 0-53.429-19.143t-22-50q0-30.286 22-49.715T436 525.143q25.143 0 48.286 12T526 568.57t37.143 42.858 39.428 46.857 44 42.857T702 732.57t69.429 12q69.142 0 116.857-40.857T936 594.857q0-69.143-48-109.714T769.714 444.57Q688 444.571 632 500l53.143 61.714q37.714-36.571 81.143-36.571 29.714 0 52.571 18.857t22.857 48q0 32.571-21.143 52.286T766.857 664q-24.571 0-47.143-12t-41.143-31.429-37.428-42.857-39.714-46.857T557.143 488 502 456.571t-67.714-12q-69.715 0-118.286 40.286t-48.571 108.286z"/></svg>',datatip:"JSFiddle"})]))(e)),!1!==e.codepen&&l.appendChild(y(e))}else a.style.display="none",c.style.height="auto",l.appendChild(r("span",{className:"title",innerHTML:p})),l.appendChild(y(e,t)),l.style.height="40px";s.setAttribute("demo-inited","")},L=()=>{setTimeout((()=>{const e=h(document,"code-demo-wrapper"),t={};Promise.all(e.map((e=>{if(e.hasAttribute("demo-inited"))return Promise.resolve();const s=decodeURIComponent(e.dataset.type||"normal"),n=JSON.parse(decodeURIComponent(e.dataset.config||"{}")),o=(e=>{const t=Object.keys(e),s={html:[],js:[],css:[],isLegal:!1};return["html","js","css"].forEach((n=>{const o=t.filter((e=>a[n].types.includes(e)));if(o.length){const t=o[0];s[n]=[e[t].replace(/^\n|\n$/g,""),a[n].map[t]||t]}})),s.isLegal=!(s.html.length&&"none"!==s.html[1]||s.js.length&&"none"!==s.js[1]||s.css.length&&"none"!==s.css[1]),s})(JSON.parse(decodeURIComponent(e.dataset.code||"{}")));switch(s){case"react":{const s=((e,t)=>{const s=c(t);return{...s,html:p(""),js:i(e.js[0]||""),css:e.css[0]||(e.js[0]?e.js[0].replace(/App\.__style__(?:\s*)=(?:\s*)`([\s\S]*)?`/,"$1").trim():""),isLegal:e.isLegal,jsLib:[s.react,s.reactDOM,...s.jsLib],jsx:!0,getScript:()=>{var t,s;const n=(null===(s=null===(t=window.Babel)||void 0===t?void 0:t.transform(e.js[0]||"",{presets:["es2015","react"]}))||void 0===s?void 0:s.code)||"";return`window.ReactDOM.render(window.React.createElement(${u(n)}), document.firstElementChild)`}}})(o,n);return Promise.all([d(t,s.babel),d(t,s.react),d(t,s.reactDOM)]).then((()=>f({code:s,codeType:o,container:e})))}case"vue":{const s=((e,t)=>{const s=c(t),n=e.html[0]||"",o=/<template>([\s\S]+)<\/template>/u.exec(n),a=/<script(\s*lang=(['"])(.*?)\2)?>([\s\S]+)<\/script>/u.exec(n),r=/<style(\s*lang=(['"])(.*?)\2)?\s*(?:scoped)?>([\s\S]+)<\/style>/u.exec(n),d=o?o[1].replace(/^\n|\n$/g,""):"",[l="",i=""]=a?[a[4].replace(/^\n|\n$/g,""),a[3]]:[],[h="",v=""]=r?[r[4].replace(/^\n|\n$/g,""),r[3]]:[],y=""===i&&(""===v||"css"===v);return{...s,html:p(d),js:m(l),css:h,isLegal:y,jsLib:[s.vue,...s.jsLib],getScript:()=>{var e,s;const n=t.useBabel?(null===(s=null===(e=window.Babel)||void 0===e?void 0:e.transform(l,{presets:["es2015"]}))||void 0===s?void 0:s.code)||"":l.replace(/export\s+default/u,"return");return`const app=window.document.createElement('div');document.firstElementChild.appendChild(app);const appOptions=${u(n)};appOptions.template=\`${d.replace("`",'\\`"')}\`;window.Vue.createApp(appOptions).mount(app);`}}})(o,n),a=[d(t,s.vue)];return s.useBabel&&a.push(d(t,s.babel)),Promise.all(a).then((()=>f({code:s,codeType:o,container:e})))}default:{const s=((e,t)=>{const s=c(t),n=e.js[0]||"";return{...s,html:l(e.html[0]||""),js:n,css:e.css[0]||"",isLegal:e.isLegal,getScript:()=>{var e;return s.useBabel?(null===(e=window.Babel.transform(n,{presets:["es2015"]}))||void 0===e?void 0:e.code)||"":n}}})(o,n);return(s.useBabel?d(t,s.babel):Promise.resolve()).then((()=>f({code:s,codeType:o,container:e,innerHTML:!0})))}}})))}),MARKDOWN_ENHANCE_DELAY)};var b=e((()=>{const e=n();t((()=>e.path),(()=>L())),s((()=>L()))}));export{b as default};
//# sourceMappingURL=appSetup.js.map
