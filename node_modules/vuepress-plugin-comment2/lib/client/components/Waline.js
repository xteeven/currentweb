import{useLocaleConfig as e}from"@mr-hope/vuepress-shared/lib/client";import{usePageFrontmatter as t,usePageLang as l}from"@vuepress/client";import{defineComponent as o,computed as n,onMounted as a,onBeforeUnmount as i,watch as r,nextTick as s,h as m}from"vue";import{useRoute as c}from"vue-router";import"../styles/waline.scss";const u=COMMENT_OPTIONS,p=u;Boolean(p&&"giscus"===p.type&&p.repo&&p.repoId&&p.category&&p.categoryId);const v=u,d=Boolean(v&&"waline"===v.type&&v.serverURL),h=WALINE_LOCALES;var w=o({name:"WalineComment",setup(){const o=c(),u=t(),p=l(),w=e(h);let g,y=null;const f=n((()=>{if(!d)return!1;const e=!1!==v.comment,t=u.value.comment;return Boolean(t)||!1!==e&&!1!==t})),j=n((()=>{if(!d)return!1;const e=!1!==v.pageviews,t=u.value.pageview;return Boolean(t)||!1!==e&&!1!==t})),C=()=>{const e=g=(new Date).getTime();y?setTimeout((()=>{e===g&&y.update({lang:"zh-CN"===p.value?"zh-CN":"en",locale:{...w.value,...v.locale||{}}})}),v.delay):Promise.all([import("@waline/client"),new Promise((e=>{setTimeout(e,v.delay)}))]).then((([{default:t}])=>{e===g&&(y=t({lang:"zh-CN"===p.value?"zh-CN":"en",locale:{...w.value,...v.locale||{}},emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili"],dark:"html.dark",...v,el:"#waline-comment",visitor:j.value}))}))};return a((()=>{d&&C()})),i((()=>{y&&y.destroy()})),r((()=>o.path),(()=>s().then((()=>C())))),()=>m("div",{class:"waline-wrapper",style:{display:f.value?"block":"none"},innerHTML:'<div id="waline-comment" />'})}});export{w as default};
//# sourceMappingURL=Waline.js.map
